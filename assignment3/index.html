<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>3D Music Player</title>
    <style>
      /* Base Styles */
      body {
        margin: 0;
        overflow: hidden;
        font-family: Arial, sans-serif;
        color: white;
        background: linear-gradient(45deg, #1a1a1a, #2d2d2d);
      }

      /* 3D Carousel */
      .scene {
        perspective: 1000px;
        height: 100vh;
      }

      .carousel {
        transform-style: preserve-3d;
        transition: transform 0.5s;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .album {
        position: absolute;
        width: 500px;
        height: 500px;
        background-size: cover;
        border: 2px solid transparent;
        transition: all 0.3s;
        cursor: pointer;
        transform-origin: center center;
      }

      .album:hover {
        border-color: white !important;
        transform: scale(1.1);
        z-index: 10;
      }

      /* Vinyl Page */
      .vinyl-page {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        background: rgba(0, 0, 0, 0.9);
        z-index: 1000;
      }

      .vinyl {
        position: absolute;
        left: -300px;
        width: 300px;
        height: 300px;
        transition: transform 0.5s;
        background: url("images/vinyl.png") no-repeat center;
        background-size: contain;
      }

      .handle {
        position: absolute;
        right: 50px;
        top: 50%;
        width: 50px;
        height: 50px;
        cursor: grab;
        transition: transform 0.3s;
        background: url("images/handle.png") no-repeat center;
        background-size: contain;
      }

      .playing .handle {
        transform: rotate(30deg);
      }

      /* Corners */
      .corners {
  z-index: 2000;
  position: fixed;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.corners a {
  position: absolute;
  color: white;
  text-decoration: none;   /* ‚ùå Removes underline */
  font-size: 1rem;
  font-weight: 400;
  pointer-events: auto;
  padding: 10px;
}
.corners a:hover {
  color: #ccc;
}
#socialsdescr {
  left: 0;
  top: 0;
}
#contact {
  right: 0;
  top: 0;
  text-align: right;
}
#scroll-hint {
  left: 0;
  bottom: 0;
}
#bio {
  right: 0;
  bottom: 0;
  text-align: right;
}

      #playerUI {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
}

#playerUI img {
  width: 300px;
  height: 300px;
  object-fit: cover;
  border-radius: 20px;
  margin-bottom: 20px;
}

#playerUI h2 {
  font-size: 2rem;
  margin-bottom: 10px;
}

      #playerUI button {
        font-size: 1.5rem;
        padding: 10px 20px;
        margin: 0 10px;
        border: none;
        border-radius: 5px;
        background: #333;
        color: white;
        cursor: pointer;
        transition: background 0.3s;
      }


      #playerUI button {
  font-size: 1.5rem;
  padding: 10px 20px;
  margin: 0 10px;
  border: none;
  border-radius: 5px;
  background: #333;
  color: white;
  cursor: pointer;
  transition: background 0.3s;
}

#playerUI button:hover {
  background: #555;
}

      #progressBar {
  width: 80%;
  margin: 20px 0;
  height: 5px;
  background: #444;
  border-radius: 5px;
}

#progressBar::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 15px;
  height: 15px;
  background: white;
  border-radius: 50%;
  cursor: pointer;
  box-shadow: 0 0 2px #000;
}

    </style>
  </head>
  <body>
    <body>
        <div class="corners">
            <a href="#" id="socialsdescr">Jinhui Liang<br />Multimedia Designer</a>
            <a href="#" id="contact">Contact</a>
            <a href="#" id="scroll-hint">scroll up/down</a>
            <a href="#" id="bio">bio</a>
          </div>
          
          <div class="scene">
            <div class="carousel" id="carousel"></div>
          </div>
          
          <div class="vinyl-page" id="vinylPage">
            <div class="vinyl"></div>
            <div class="handle"></div>
            <audio id="player"></audio>
          
            <div id="playerUI">
              <img id="albumArt" src="" alt="Album Cover" />
              <h2 id="trackTitle">Now Playing</h2>
              <input type="range" id="progressBar" value="0" min="0" step="1" />
              <div>
                <button id="playPauseBtn">Play</button>
                <button id="backBtn">Back</button>
              </div>
            </div>
          </div>
          
    <script>
      const ALBUMS = [
        {
          title: "Song 1",
          cover: "/assignment3/images/cover1.jpg",
          audio: "/assignment3/audio/chance.mp3",
        },
        {
          title: "Song 2",
          cover: "images/album2.jpg",
          audio: "audio/song2.mp3",
        },
        {
          title: "Song 3",
          cover: "images/album3.jpg",
          audio: "audio/song3.mp3",
        },
        {
          title: "Song 4",
          cover: "images/album4.jpg",
          audio: "audio/song4.mp3",
        },
        {
          title: "Song 5",
          cover: "images/album5.jpg",
          audio: "audio/song5.mp3",
        },
        {
          title: "Song 6",
          cover: "images/album6.jpg",
          audio: "audio/song6.mp3",
        },
      ];

      class MusicPlayer {
        constructor() {
          this.carousel = document.getElementById("carousel");
          this.vinylPage = document.getElementById("vinylPage");
          this.player = document.getElementById("player");
          this.initCarousel();
          this.initVinylControls();
        }

        initCarousel() {
          ALBUMS.forEach((album, i) => {
            const albumEl = document.createElement("div");
            albumEl.className = "album";
            albumEl.style.backgroundImage = `url(${album.cover})`;
            this.setAlbumPosition(albumEl, i);
            albumEl.addEventListener("click", () => this.showVinyl(album));
            this.carousel.appendChild(albumEl);
          });

          this.currentAngle = 0;
          window.addEventListener("wheel", (e) => {
            this.currentAngle += e.deltaY * 0.2;
            this.carousel.style.transform = `rotateY(${this.currentAngle}deg)`;
          });
        }

        setAlbumPosition(el, index) {
          const angle = (index * 60) % 360;
          const scale = 1 - Math.abs(angle - 180) / 300;
          el.style.transform = `
                    rotateY(${angle}deg)
                    translateZ(400px)
                    scale(${scale})
                `;
        }

        showVinyl(album) {
  document.querySelector(".scene").style.display = "none";
  this.vinylPage.style.display = "block";
  this.player.src = album.audio;

  document.getElementById("trackTitle").textContent = album.title;
  document.getElementById("playPauseBtn").textContent = "Play";
  document.getElementById("albumArt").src = album.cover;

  setTimeout(() => {
    this.vinylPage.querySelector(".vinyl").style.transform = "translateX(300px)";
  }, 50);
}


        initVinylControls() {
          let isDragging = false;
          const handle = this.vinylPage.querySelector(".handle");

          handle.addEventListener("mousedown", () => {
            isDragging = true;
            document.addEventListener("mousemove", this.dragHandle);
            document.addEventListener("mouseup", () => {
              isDragging = false;
              document.removeEventListener("mousemove", this.dragHandle);
            });
          });

          // Vinyl click to close
          this.vinylPage
            .querySelector(".vinyl")
            .addEventListener("click", () => {
              this.goBackToCarousel();
            });

          // New: Play/Pause Button
          document
            .getElementById("playPauseBtn")
            .addEventListener("click", () => {
              if (this.player.paused) {
                this.player.play();
                this.vinylPage.classList.add("playing");
                document.getElementById("playPauseBtn").textContent = "Pause";
              } else {
                this.player.pause();
                this.vinylPage.classList.remove("playing");
                document.getElementById("playPauseBtn").textContent = "Play";
              }
            });

          // New: Back Button
          document.getElementById("backBtn").addEventListener("click", () => {
            this.goBackToCarousel();
          });

          // Update progress bar as audio plays
this.player.addEventListener("timeupdate", () => {
  const progressBar = document.getElementById("progressBar");
  progressBar.max = this.player.duration;
  progressBar.value = this.player.currentTime;
});

// Allow seeking via progress bar
document.getElementById("progressBar").addEventListener("input", (e) => {
  this.player.currentTime = e.target.value;
});

        }

        

        goBackToCarousel() {
          this.player.pause();
          this.vinylPage.classList.remove("playing");
          this.vinylPage.style.display = "none";
          document.querySelector(".scene").style.display = "block";
        }

        dragHandle = (e) => {
          const vinyl = this.vinylPage.querySelector(".vinyl");
          const vinylRect = vinyl.getBoundingClientRect();
          const handleRect = e.target.getBoundingClientRect();

          const collision = !(
            handleRect.right < vinylRect.left ||
            handleRect.left > vinylRect.right ||
            handleRect.bottom < vinylRect.top ||
            handleRect.top > vinylRect.bottom
          );

          if (collision && !this.player.paused) {
            this.player.pause();
            this.vinylPage.classList.remove("playing");
          } else if (collision) {
            this.player.play();
            this.vinylPage.classList.add("playing");
          }
        };
      }

      // Initialize player
      new MusicPlayer();
    </script>
  </body>
</html>
